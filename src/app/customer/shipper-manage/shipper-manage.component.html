<div class="modal-container" cdkDrag>
    <div class="modal-header" cdkDragHandle>
    <h5 class="modal-title">{{ modalTitle }}</h5>
    <i class="fal fa-times cursor-pointer fs-24 icon-hover-primary" (click)="closeShipperEdit()"></i>
  </div>
  <div class="modal-body manage-customer-modal static-element">
    <app-loading-modal class='large' *ngIf="!loaded"></app-loading-modal>
    <form
      [formGroup]="shipperForm"
      class="form-container"
      (keydown)="keyDownFunction($event)"
      *ngIf="loaded"
    >
      <div class="col-12">

        <div class="row static-element pt-2">
          <div class="col-12">
            <div class="form-label-group">
              <input
                id="name"
                class="form-control input-control required"
                placeholder="Business name"
                formControlName="name"
                (paste)="onPaste($event, 'name')"
                (keydown)="onCheckBackSpace($event)"
                (keypress)="onBusinessName($event)"
                appInputFocus
                appAutoFocus
                [modalType]="inputData.data.type"
              >
              <label class="required-label" for="name">Business name</label>
              <app-required-label [control]="shipperForm.controls.name"></app-required-label>
            </div>
          </div>
        </div>


        <div class="row">
          <div class="col-4">
            <div class="form-label-group input-icon phone-field-wrapper {{ manageInputValidation(shipperForm.controls.phone) }}">
              <input
                id="phone"
                class="form-control input-control"
                placeholder="Phone"
                appInputFocus
                formControlName="phone"
                mask="(000) 000-0000"
              >
              <label for="phone">Phone</label>
            </div>
          </div>
          <div class="col-8">
            <div class="form-label-group input-icon email-field-wrapper {{ manageInputValidation(shipperForm.controls.email) }}">
              <input
                id="email"
                appInputFocus
                class="form-control input-control"
                oninput="this.value = this.value.replace(/[ ]|^ /g,'')"
                (paste)="onPaste($event, 'email')"
                (keypress)="onEmailTyping($event)"
                (keydown)="onCheckBackSpace($event)"
                placeholder="Email"
                formControlName="email"
              >
              <label for="email">Email</label>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-10">
            <div class="form-label-group input-icon address-field-wrapper {{ manageInputValidation(shipperForm.controls.address) }}">
              <input
                id="address"
                class="form-control input-control required"
                placeholder="Address, City, State Zip"
                formControlName="address"
                appInputFocus
                ngx-google-places-autocomplete
                [options]="options"
                oninput="this.value = this.value.replace(/[^A-Za-z0-9-,.;'&/.() ]|^ /g,'')"
                #placesRef="ngx-places"
                (keydown)="addressKeyDown($event)"
                (onAddressChange)="handleAddressChange($event)"
              >
              <label class="required-label" for="address">Address, City, State Zip</label>
              <app-required-label [control]="shipperForm.controls.address"></app-required-label>
            </div>
          </div>
          <div class="col-2">
            <div class="form-label-group">
              <input
                id="addressUnit"
                class="form-control input-control"
                placeholder="Unit#"
                formControlName="addressUnit"
                oninput="this.value = this.value.replace(/[^A-Za-z0-9-,.;'&/.() ]|^ /g,'')"
                (keypress)="onNameTyping($event)"
                (keydown)="onCheckBackSpace($event)"
                maxlength="6"
              >
              <label for="addressUnit">Unit#</label>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-4">
            <div class="form-label-group no-padding-input">
              <input
                id="receivingHours"
                class="form-control input-control"
                placeholder="Receiving hours"
                appInputFocus
                formControlName="receivingHours"
                oninput="this.value = this.value.replace(/[^A-Za-z0-9-,.;'&/.() ]|^ /g,'')"
                mask="00:00:00 - 00:00:00"
              >
              <label for="receivingHours">Receiving hours</label>
            </div>
          </div>
          <div class="col-4">
            <div class="btn-group btn-group-toggle">
              <label class="btn-primary" ngbButtonLabel>
                <input type="checkbox" ngbButton [checked]="true" formControlName="appointments">
                Appointments
              </label>
            </div>
          </div>
        </div>

        <div formArrayName="contactPersons">
          <div *ngFor="let item of contactPersonsFormGroup.controls; let i = index">
            <div [formGroupName]="i">
              <div class="row">
                <div class="col-12"><hr></div>
                <div class="col-12">
                  <div class="form-label-group">
                    <!-- appInputrestriction="[A-Za-z]" -->
                    <input
                      id="name{{i}}"
                      class="form-control input-control"
                      oninput="this.value = this.value.replace(/[^A-Za-z0-9-,.;'&/.() ]|^ /g,'')"
                      (paste)="onPaste($event, 'name', i)"
                      (keypress)="onContactNameTyping($event)"
                      (keydown)="onCheckBackSpace($event)"
                      placeholder="Contact name"
                      formControlName="name"
                    >
                    <label for="name{{i}}">Contact name</label>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-label-group input-icon phone-field-wrapper no-padding-input {{ manageInputValidation(shipperForm.controls.phone) }}">
                    <input
                      id="phone{{i}}"
                      class="form-control input-control"
                      mask="(000) 000-0000"
                      appInputFocus
                      placeholder="Phone"
                      formControlName="phone"
                    >
                    <label for="phone{{i}}">Phone</label>
                  </div>
                </div>
                <div class="col-7">
                  <div class="form-label-group input-icon email-field-wrapper no-padding-input contactEmail {{ manageInputValidation(shipperForm.controls.email) }}">
                    <input
                      id="email{{i}}"
                      appInputFocus
                      class="form-control input-control contactEmail"
                      placeholder="Email"
                      oninput="this.value = this.value.replace(/[ ]|^ /g,'')"
                      (paste)="onPaste($event, 'email', i)"
                      (keypress)="onEmailTyping($event)"
                      (keydown)="onCheckBackSpace($event)"
                      formControlName="email"
                    >
                    <label for="email{{i}}">Email</label>
                  </div>
                </div>
                <div class="col-1">
                  <a class="text-black-50 removeItem " (click)="removeContact(i)">Ã—</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <br>
      <a
        *ngIf="contactPersonsFormGroup.controls.length < 2"
        href="javascript:void(0)"
        class="text-underline"
        (click)="addNewContactPerson()"
        >{{ contactPersonsList.controls.length === 0 ? 'Add contact' : 'Add additional contact' }}</a
      >
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="cancel-btn" (click)="closeShipperEdit()">Cancel</button>
    <button type="button" class="save-btn" (click)="manageShipper()" ngbAutofocus>
      Save
    </button>
  </div>
  </div>
