<div class="modal-container" cdkDrag>
  <div class="modal-header" cdkDragHandle>
    <h5 class="modal-title">{{ modalTitle }}</h5>
    <app-modal-close></app-modal-close>
  </div>
  <div class="modal-body">
    <app-loading-modal *ngIf="!loaded"></app-loading-modal>
    <form [formGroup]="licenseForm" class="form-container" (keydown)="keyDownFunction($event)" *ngIf="loaded">
      <div class="row">
        <div class="col-4">
          <div class="form-label-group">
            <kendo-floatinglabel
              text="Issue date"
              class="required datepicker-label{{
                licenseForm.controls.startDate.value !== null &&
                licenseForm.controls.startDate.value !== ''
                  ? ' valid-label'
                  : ''
              }}"
            >
              <kendo-datepicker
                placeholder=""
                formControlName="startDate"
                [format]="format"
                [formatPlaceholder]="{
                  year: 'yy',
                  month: 'mm',
                  day: 'dd'
                }"
                required
                appAutoFocus
                [popupSettings]="{ popupClass: 'custom-datepick' }"
                [modalType]="inputData.data.type"
              ></kendo-datepicker>
            </kendo-floatinglabel>
            <span *ngIf="!licenseForm.controls.startDate.valid" class="required-notice"
              >Required</span
            >
          </div>
        </div>
        <div class="col-4">
          <div class="form-label-group">
            <kendo-floatinglabel
              text="Exp. date"
              class="required datepicker-label{{
                licenseForm.controls.endDate.value !== null &&
                licenseForm.controls.endDate.value !== ''
                  ? ' valid-label'
                  : ''
              }}"
            >
              <kendo-datepicker
                placeholder=""
                formControlName="endDate"
                [format]="format"
                [formatPlaceholder]="{
                  year: 'yy',
                  month: 'mm',
                  day: 'dd'
                }"
                required
                [popupSettings]="{ popupClass: 'custom-datepick' }"
              ></kendo-datepicker>
            </kendo-floatinglabel>
            <span *ngIf="!licenseForm.controls.endDate.valid" class="required-notice"
              >Required</span
            >
          </div>
        </div>
        <div class="col-4">
          <div class="form-label-group">
            <input
              id="licensePlate"
              class="form-control input-control required"
              placeholder="License plate"
              formControlName="licensePlate"
              maxlength="15"
              (paste)="onPaste($event, 'licensePlate', 15)"
              (keypress)="onAccountLicensePlateTyping($event)"
            />
            <label class="required-label" for="licensePlate">License plate</label>
            <app-required-label
              [control]="licenseForm.controls.licensePlate"
            ></app-required-label>
          </div>
        </div>
      </div>
      <app-attachments page='truck' (filesChanged)="setFiles($event)" [attachments]="attachments"></app-attachments>
    </form>
  </div>

  <div class="modal-footer">
    <button type="button" class="cancel-btn" (click)="closeModal()">Cancel</button>
    <button type="button" class="save-btn" (click)="saveLicense(false)" ngbAutofocus>
      Save
    </button>
  </div>
</div>
